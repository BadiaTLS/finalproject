{% extends "../students/student_index.html" %}

{% block title %} Welcome To Dining Hall User {% endblock %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'styles/styles_student_dh_view.css' %}">
{% endblock %}

{% block message %}
  {% if messages %}
      {% for message in messages %}
        <div class="alert alert-danger" role="alert">
          {{ message }}
        </div>
      {% endfor %}
  {% endif %}
{% endblock %}

{% block template %}
<div class="wrap mt-3">
  {% if not can_booking %}
    <div class="row w-50 mx-auto bg-body-secondary p-3">
      <p class="text-center mx-auto">You have already booked for {{ session }} session at {{ time_suggested }} with menu {{ menu_object }}</p>
    </div>
  {% else %}
    {% block activities %}
    {% load static %}
    <div class="row">
      <div class="col-md-4 col-sm-6">
          <div class="box">
              <img src="{% static 'images/breakfast.jpg' %}" alt="breakfast">
              <div class="box-content">
                  <div class="inner-content">
                    <h3 class="title">BREAKFAST</h3>
                    <h3 class="title">{{ breakfast }}</h3>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-md-4 col-sm-6">
          <div class="box">
              <img src="{% static 'images/lunch.jpg' %}" alt="lunch">
              <div class="box-content">
                  <div class="inner-content">
                    <h3 class="title">LUNCH</h3>
                    <h3 class="title">{{ lunch }}</h3>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-md-4 col-sm-6">
        <div class="box">
          <img src="{% static 'images/dinner.jpg' %}" alt="dinner">
            <div class="box-content">
                <div class="inner-content">
                    <h3 class="title">DINNER</h3>
                    <h3 class="title">{{ dinner }}</h3>
                </div>
            </div>
        </div>
      </div>
    </div>
      {% if menu_object %}
        <div class="row w-50 mx-auto p-3">
          <form action="confirm" method="post">
            {% csrf_token %}
            <p class="text-center mx-auto">Waktu yang disarankan untuk anda adalah <strong class="h3">{{ time_suggested|default_if_none:"-" }}</strong></p>
            <input type="hidden" name="time_suggested" value="{{ time_suggested }}">
            <fieldset class="form-group p-3">
              <legend class="w-auto px-2">Apakah anda ingin mengambil jam yang ditawarkan?</legend>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="choice" id="take" value="take" checked>
                <label class="form-check-label" for="take"><strong>Ambil</strong></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="choice" id="nottake" value="nottake">
                <label class="form-check-label" for="nottake"><strong>Tidak</strong></label>
              </div>
            </fieldset>
            <div class="form-group row text-center">
              <div class="col">
                <button type="submit" class="btn btn-primary btn-customized" id="submit-btn">Submit</button>
              </div>
            </div>
          </form>
        </div>
      {% else %}
        <div class="row w-50 mx-auto bg-body-secondary p-3">
          <p class="text-center mx-auto">Tidak bisa memesan karena tidak ada menu.</p>
        </div>
      {% endif %}
    {% endblock %}
  {% endif %}
</div>
{% endblock %}

{% block script %}
<script>
  // Get the radio buttons and submit button
  const takeRadio = document.getElementById("take");
  const nottakeRadio = document.getElementById("nottake");
  const submitButton = document.getElementById("submit-btn");

  // Add event listeners to the radio buttons
  takeRadio.addEventListener("change", toggleSubmitButton);
  nottakeRadio.addEventListener("change", toggleSubmitButton);

  // Function to toggle the disabled attribute of the submit button
  function toggleSubmitButton() {
    submitButton.disabled = !takeRadio.checked && !nottakeRadio.checked;
  }

  // Call the function initially to set the initial state
  toggleSubmitButton();
</script>
{% endblock %}
