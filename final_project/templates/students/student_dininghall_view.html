{% extends "../students/student_index.html" %}

{% block title %} Welcome To Dining Hall User {% endblock %}

{% block navbar %}
<li class="nav-item">
    <a class="nav-link" href="{% url 'dining_hall' %}">Dining Hall</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'library' %}">Library</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{% url 'laboratorium' %}">Laboratorium</a>
</li>
{% endblock %}

{% block template %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
<div class="wrap">
  <div class="table-responsive">
    <table class="table table-striped-columns w-50 text-center mx-auto mt-3">
      <caption><strong>30</strong> Booked from <strong>45</strong> Available</caption>
      <thead>
          <tr>
          <th scope="col">Time Range</th>
          <th scope="col">Capacity</th>
          </tr>
      </thead>
      <tbody>
          {% for hour in time_objects %}
          <tr>
          <td>{{ hour }}</td>
          <td>10</td>
          </tr>
          {% endfor %}
      </tbody>
    </table>
    <div class="w-50 text-center mx-auto mb-4">
      Menu untuk tanggal <strong>{{ date }}</strong> sesi <strong>{{ session }}</strong> adalah <strong>{{ menu_object.menu }}</strong>
    </div>
  </div>

  {% block activities %}
  <div class="row w-50 mx-auto bg-body-secondary p-3">
    <form action="confirm" method="post">
      {% csrf_token %}
      <p class="w-50 text-center mx-auto">Waktu yang disarankan untuk anda adalah <strong class="h3">{{ time_suggested }}</strong></p>
      <input type="hidden" name="time_suggested" value="{{ time_suggested }}">
      <fieldset class="form-group p-3">
        <legend class="w-auto px-2">Apakah anda ingin mengambil jam yang ditawarkan?</legend>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="choice" id="take" value="take" checked>
          <label class="form-check-label" for="take"><strong>Ambil</strong></label>
        </div>
        <div class="form-check">
          <input class="form-check-input" type="radio" name="choice" id="nottake" value="nottake">
          <label class="form-check-label" for="nottake"><strong>Tidak</strong></label>
        </div>
      </fieldset>
      <div class="form-group row text-center">
        <div class="col">
          <button type="submit" class="btn btn-primary btn-customized" id="submit-btn">Submit</button>
        </div>
      </div>
    </form>
  </div>
  {% endblock %}
</div>
{% endblock %}

{% block script %}
<script>
  // Get the radio buttons and submit button
  const takeRadio = document.getElementById("take");
  const nottakeRadio = document.getElementById("nottake");
  const submitButton = document.getElementById("submit-btn");

  // Add event listeners to the radio buttons
  takeRadio.addEventListener("change", toggleSubmitButton);
  nottakeRadio.addEventListener("change", toggleSubmitButton);

  // Function to toggle the disabled attribute of the submit button
  function toggleSubmitButton() {
      submitButton.disabled = !takeRadio.checked && !nottakeRadio.checked;
  }

  // Call the function initially to set the initial state
  toggleSubmitButton();
</script>
{% endblock %}