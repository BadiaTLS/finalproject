{% extends "../students/student_index.html" %}

{% block title %} Welcome To Dining Hall User {% endblock %}

{% block styles %}
<style>
  body {
    background-color: #E9E3E6;
  }
  .box{
      background: linear-gradient(180deg, #e52d27 0%, #b31217 100%);
      font-family: 'Nanum Gothic', sans-serif;
      border-radius: 25px 0;
      position: relative;
      overflow: hidden;
  }
  .box:before,
  .box:after,
  .box .box-content:before,
  .box .box-content:after{
      content: "";
      background: #E9E3E6;
      width: 50%;
      height: 4px;
      transform: scaleX(0);
      position: absolute;
      top: 15px;
      left: 15px;
      z-index: 1;
      transition: all 600ms ease;
      transform: scale(1);
  }
  .box:after{
      top: auto;
      bottom: 15px;
      left: auto;
      right: 15px;
  }
  .box .box-content:before,
  .box .box-content:after{
      width: 4px;
      height: 50%;
      transform: scale(1);
  }
  .box .box-content:after{
      left: auto;
      right: 15px;
      top: auto;
      bottom: 15px;
  }
  .box img{
      width: 100%;
      height: auto;
      transform: scale3d(1.1, 1.1, 1);
      transition: all 0.25s linear;
      opacity: 0.25;
      transform: scale(1.25);
  }
  .box .inner-content{
      color: #E9E3E6;
      text-align: center;
      width: 70%;
      opacity: 0;
      transform: translateX(-50%) translateY(-50%);
      position: absolute;
      top: 70%;
      left: 50%;
      transition: all 600ms ease;
      opacity: 1;
      top: 50%;
  }
  .box .title{
      font-size: 20px;
      font-weight: 800;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin: 0 0 3px;
  }
  .box a{
      color: #E9E3E6;
      font-size: 18px;
      line-height: 32px;
      border: 2px solid #E9E3E6;
      border-radius: 10px 0 10px 0;
      display: block;
      transition: all 0.3s;
      color: #b31217;
      background: #E9E3E6;
      border-radius: 0 10px 0 10px;
  }
  
  @media only screen and (max-width:990px){
      .box { margin: 0 0 30px; }
  }
  </style>
{% endblock %}

{% block message %}
  {% if messages %}
      {% for message in messages %}
        <div class="alert alert-danger" role="alert">
          {{ message }}
        </div>
      {% endfor %}
  {% endif %}
{% endblock %}

{% block template %}
<div class="wrap">
  {% if not can_booking %}
    <div class="row w-50 mx-auto bg-body-secondary p-3">
      <p class="text-center mx-auto">You have already booked for {{ session }} session at {{ time_suggested }} with menu {{ menu_object }}</p>
    </div>
  {% else %}
    {% block activities %}
    {% load static %}
    <div class="row">
      <div class="col-md-4 col-sm-6">
          <div class="box">
              <img src="{% static 'images/breakfast.jpg' %}" alt="breakfast">
              <div class="box-content">
                  <div class="inner-content">
                    <h3 class="title">BREAKFAST</h3>
                    <h3 class="title">{{ breakfast }}</h3>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-md-4 col-sm-6">
          <div class="box">
              <img src="{% static 'images/lunch.jpg' %}" alt="lunch">
              <div class="box-content">
                  <div class="inner-content">
                    <h3 class="title">LUNCH</h3>
                    <h3 class="title">{{ lunch }}</h3>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-md-4 col-sm-6">
        <div class="box">
          <img src="{% static 'images/dinner.jpg' %}" alt="dinner">
            <div class="box-content">
                <div class="inner-content">
                    <h3 class="title">DINNER</h3>
                    <h3 class="title">{{ dinner }}</h3>
                </div>
            </div>
        </div>
      </div>
    </div>
      {% if menu_object %}
        <div class="row w-50 mx-auto p-3">
          <form action="confirm" method="post">
            {% csrf_token %}
            <p class="text-center mx-auto">Waktu yang disarankan untuk anda adalah <strong class="h3">{{ time_suggested|default_if_none:"-" }}</strong></p>
            <input type="hidden" name="time_suggested" value="{{ time_suggested }}">
            <fieldset class="form-group p-3">
              <legend class="w-auto px-2">Apakah anda ingin mengambil jam yang ditawarkan?</legend>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="choice" id="take" value="take" checked>
                <label class="form-check-label" for="take"><strong>Ambil</strong></label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="choice" id="nottake" value="nottake">
                <label class="form-check-label" for="nottake"><strong>Tidak</strong></label>
              </div>
            </fieldset>
            <div class="form-group row text-center">
              <div class="col">
                <button type="submit" class="btn btn-primary btn-customized" id="submit-btn">Submit</button>
              </div>
            </div>
          </form>
        </div>
      {% else %}
        <div class="row w-50 mx-auto bg-body-secondary p-3">
          <p class="text-center mx-auto">Tidak bisa memesan karena tidak ada menu.</p>
        </div>
      {% endif %}
    {% endblock %}
  {% endif %}
</div>
{% endblock %}

{% block script %}
<script>
  // Get the radio buttons and submit button
  const takeRadio = document.getElementById("take");
  const nottakeRadio = document.getElementById("nottake");
  const submitButton = document.getElementById("submit-btn");

  // Add event listeners to the radio buttons
  takeRadio.addEventListener("change", toggleSubmitButton);
  nottakeRadio.addEventListener("change", toggleSubmitButton);

  // Function to toggle the disabled attribute of the submit button
  function toggleSubmitButton() {
    submitButton.disabled = !takeRadio.checked && !nottakeRadio.checked;
  }

  // Call the function initially to set the initial state
  toggleSubmitButton();
</script>
{% endblock %}
