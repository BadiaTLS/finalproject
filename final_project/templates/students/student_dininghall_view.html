{% extends "../students/student_index.html" %}

{% block title %} Welcome To Dining Hall User {% endblock %}

{% block styles %}
{% load static %}
<link rel="stylesheet" href="{% static 'styles/styles_student_dh_view.css' %}">
{% endblock %}

{% block message %}
  {% if messages %}
      {% for message in messages %}
        <div class="alert alert-danger" role="alert">
          {{ message }}
        </div>
      {% endfor %}
  {% endif %}
{% endblock %}

{% block template %}
<div class="wrap mt-3">
  {% if not can_booking %}
    <div class="row w-50 mx-auto bg-body-secondary p-3">
      <p class="text-center mx-auto">You have already booked for {{ session }} session at {{ time_suggested }} with menu {{ session_id }}</p>
    </div>
  {% else %}
    {% block activities %}
    {% load static %}
    <!-- <p class="suggestions-text">Pemesanan untuk Hari {{day}} Tanggal {{date}} Sesi {{session}}</p> -->
    <p class="suggestions-text">Order {{session}} for {{day}}, {{date}}</p>
    <div class="row">
        <div class="col-md-4 col-sm-6">
            <!-- Add the active class to the box element if it is in the current session -->
            <div class="box {% if current_session == 'BREAKFAST' %}active{% endif %}">
                <img src="{% static 'images/breakfast.jpg' %}" alt="breakfast">
                <div class="box-content">
                    <div class="inner-content">
                        <h3 class="menu_title">BREAKFAST</h3>
                        <h3 class="menu_list">{{ breakfast }}</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-6">
            <!-- Add the active class to the box element if it is in the current session -->
            <div class="box {% if current_session == 'LUNCH' %}active{% endif %}">
                <img src="{% static 'images/lunch.jpg' %}" alt="lunch">
                <div class="box-content">
                    <div class="inner-content">
                        <h3 class="menu_title">LUNCH</h3>
                        <h3 class="menu_list">{{ lunch }}</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-6">
            <!-- Add the active class to the box element if it is in the current session -->
            <div class="box {% if current_session == 'DINNER' %}active{% endif %}">
                <img src="{% static 'images/dinner.jpg' %}" alt="dinner">
                <div class="box-content">
                    <div class="inner-content">
                        <h3 class="menu_title">DINNER</h3>
                        <h3 class="menu_list">{{ dinner }}</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% if time_suggested == False %}
    <div class="row w-50 mx-auto bg-body-secondary p-3">
      <p class="text-center mx-auto">Maaf tidak ada waktu tersedia.</p>
    </div>
    {% else %}

      {% if session_id %}
        <div class="row w-50 mx-auto p-3">
          <form action="confirm" method="post">
            {% csrf_token %}
            <input type="hidden" name="time_suggested" value="{{ time_suggested }}">
            <fieldset class="form-group p-3">
              <p class="suggestions-text">Jam Makan Terbaik: <strong class="suggestion-text h3">{{ time_suggested|default_if_none:"-" }}</strong></p>
              <legend class="w-auto px-2">Apakah anda ingin mengambil jam yang ditawarkan?</legend>
              <!-- <div class="vote-btn">
                <input class="form-check-input" type="radio" name="choice" id="take" value="take" checked>
                <label class="form-check-label" for="take"><strong>Ambil</strong></label>
              </div>
              <div class="vote-btn">
                <input class="form-check-input" type="radio" name="choice" id="nottake" value="nottake">
                <label class="form-check-label" for="nottake"><strong>Tidak</strong></label>
              </div> -->
              <div>
                <input type="radio" class="btn-check" name="choice" id="success-outlined" autocomplete="off" value="yes">
                <label class="btn btn-outline-success" for="success-outlined">Ya</label>
                
                <input type="radio" class="btn-check" name="choice" id="danger-outlined" autocomplete="off" value="no">
                <label class="btn btn-outline-danger" for="danger-outlined">Tidak</label>
              </div>
            </fieldset>
            <div class="form-group row text-center">
              <div class="col">
                <button type="submit" class="btn btn-primary btn-customized" id="submit-btn" disabled>KIRIM</button>
              </div>
            </div>
          </form>
        </div>
      {% else %}
        <div class="row w-50 mx-auto bg-body-secondary p-3">
          <p class="text-center mx-auto">Tidak bisa memesan karena tidak ada menu.</p>
        </div>
      {% endif %}
    {% endif %}
    

    {% endblock %}
  {% endif %}
</div>
{% endblock %}

{% block script %}
<script>
  // get references to the radio buttons and submit button
  const radioButtons = document.querySelectorAll('input[type="radio"][name="choice"]');
  const submitButton = document.querySelector('#submit-btn');

  // function to check if any radio button is checked
  const isAnyChecked = () => [...radioButtons].some(radio => radio.checked);

  // function to update the disabled state of the submit button
  const updateSubmitButtonState = () => {
    submitButton.disabled = !isAnyChecked();
  };

  // update the submit button state initially
  updateSubmitButtonState();

  // add event listeners to the radio buttons to update the submit button state when changed
  radioButtons.forEach(radio => {
    radio.addEventListener('change', updateSubmitButtonState);
  });

</script>
{% endblock %}
